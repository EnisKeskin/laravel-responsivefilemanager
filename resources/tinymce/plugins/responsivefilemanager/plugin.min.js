tinymce.PluginManager.add("responsivefilemanager",function(e){function n(i){0===e.settings.external_filemanager_path.toLowerCase().indexOf(i.origin.toLowerCase())&&"responsivefilemanager"===i.data.sender&&(tinymce.activeEditor.insertContent(i.data.html),tinymce.activeEditor.windowManager.close(),window.removeEventListener?window.removeEventListener("message",n,!1):window.detachEvent("onmessage",n))}function i(){var i=window.innerWidth-20,t=window.innerHeight-40;(i>1800&&(i=1800),t>1200&&(t=1200),i>600)&&(i=i-(i-20)%138+10);e.focus(!0);var a="RESPONSIVE FileManager";void 0!==e.settings.filemanager_title&&e.settings.filemanager_title&&(a=e.settings.filemanager_title);var s="key";void 0!==e.settings.filemanager_access_key&&e.settings.filemanager_access_key&&(s=e.settings.filemanager_access_key);var r="";void 0!==e.settings.filemanager_sort_by&&e.settings.filemanager_sort_by&&(r="&sort_by="+e.settings.filemanager_sort_by);var o="false";void 0!==e.settings.filemanager_descending&&e.settings.filemanager_descending&&(o=e.settings.filemanager_descending);var g="";void 0!==e.settings.filemanager_subfolder&&e.settings.filemanager_subfolder&&(g="&fldr="+e.settings.filemanager_subfolder);var l="";void 0!==e.settings.filemanager_crossdomain&&e.settings.filemanager_crossdomain&&(l="&crossdomain=1",window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n));const d=e.settings.external_filemanager_path+"dialog.php?type=4&descending="+o+r+g+l+"&lang="+e.settings.language+"&akey="+s;tinymce.majorVersion<5?win=e.windowManager.open({title:a,file:d,width:i,height:t,inline:1,resizable:!0,maximizable:!0}):win=e.windowManager.openUrl({title:a,url:d,width:i,height:t,inline:1,resizable:!0,maximizable:!0})}tinymce.majorVersion<5?(e.addButton("responsivefilemanager",{icon:"browse",tooltip:"Insert file",shortcut:"Ctrl+E",onClick:i}),e.addShortcut("Ctrl+E","",i),e.addMenuItem("responsivefilemanager",{icon:"browse",text:"Insert file",shortcut:"Ctrl+E",onClick:i,context:"insert"})):(e.ui.registry.addButton("responsivefilemanager",{icon:"browse",tooltip:"Insert file",shortcut:"Ctrl+E",onAction:i}),e.addShortcut("Ctrl+E","",i),e.ui.registry.addMenuItem("responsivefilemanager",{icon:"browse",text:"Insert file",shortcut:"Ctrl+E",onAction:i,context:"insert"}))});
